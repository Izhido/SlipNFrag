#version 440 core

layout(local_size_x_id = 0, local_size_y_id = 1, local_size_z_id = 2) in;

layout(binding = 0) buffer Palette
{
	uint palData[];
};

layout(binding = 1) buffer InTexture
{
	uint inTexData[];
};

layout(binding = 2) buffer OutTexture
{
	uint outTexData[];
};

void main()
{
	uint inIndex = gl_GlobalInvocationID.x;
	uint outIndex = gl_GlobalInvocationID.x * 4;
	uint inValues = inTexData[inIndex];
	uint entry0 = (inValues >> 24) & 255;
	uint value0 = palData[entry0];
	outTexData[outIndex] = value0;
	outIndex++;
	uint entry1 = (inValues >> 16) & 255;
	uint value1 = palData[entry1];
	outTexData[outIndex] = value1;
	outIndex++;
	uint entry2 = (inValues >> 8) & 255;
	uint value2 = palData[entry2];
	outTexData[outIndex] = value2;
	outIndex++;
	uint entry3 = inValues & 255;
	uint value3 = palData[entry3];
	outTexData[outIndex] = value3;
}
